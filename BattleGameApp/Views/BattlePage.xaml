<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:BattleGameApp.ViewModels"
             x:Class="BattleGameApp.Views.BattlePage"
             BackgroundColor="Black"
             Padding="16">

    <VerticalStackLayout Spacing="22">
        <Grid ColumnDefinitions="*,20,*">
            <Border Grid.Column="0"
                    Background="#1A1A1A"
                    StrokeShape="RoundRectangle 22"
                    Padding="14"
                    HorizontalOptions="Fill">

                <VerticalStackLayout Spacing="10"
                                     HorizontalOptions="Fill"
                                     VerticalOptions="Center">

                    <Label Text="TY"
                           TextColor="LightGreen"
                           FontSize="16"
                           HorizontalTextAlignment="Center"/>

                    <Image x:Name="PlayerImage"
                           HeightRequest="140"
                           Aspect="AspectFit"
                           HorizontalOptions="Center"/>

                    <Label x:Name="PlayerNameLabel"
                           TextColor="White"
                           FontSize="18"
                           HorizontalTextAlignment="Center"/>

                    <VerticalStackLayout Spacing="6"
                                         Padding="4,6">
                        <Grid HorizontalOptions="Fill">
                            <ProgressBar x:Name="PlayerHealthBar"
                                         ProgressColor="LightGreen"
                                         HeightRequest="12"
                                         HorizontalOptions="Fill"/>
                        </Grid>

                        <Label x:Name="PlayerHealthLabel"
                               TextColor="LightGreen"
                               FontSize="13"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </Border>

            <BoxView Grid.Column="1"
                     WidthRequest="2"
                     BackgroundColor="#333"
                     VerticalOptions="Fill"/>

            <Border Grid.Column="2"
                    Background="#1A1A1A"
                    StrokeShape="RoundRectangle 22"
                    Padding="14"
                    HorizontalOptions="Fill">
                <VerticalStackLayout Spacing="10"
                                     HorizontalOptions="Fill"
                                     VerticalOptions="Center">

                    <Label Text="PRZECIWNIK"
                           TextColor="LightCoral"
                           FontSize="16"
                           HorizontalTextAlignment="Center"/>

                    <Image x:Name="EnemyImage"
                           HeightRequest="140"
                           Aspect="AspectFit"
                           HorizontalOptions="Center"/>

                    <Label x:Name="EnemyNameLabel"
                           TextColor="White"
                           FontSize="18"
                           HorizontalTextAlignment="Center"/>
                    <VerticalStackLayout Spacing="6"
                                         Padding="4,6">
                        <Grid HorizontalOptions="Fill">
                            <ProgressBar x:Name="EnemyHealthBar"
                                         ProgressColor="LightCoral"
                                         HeightRequest="12"
                                         HorizontalOptions="Fill"/>
                        </Grid>

                        <Label x:Name="EnemyHealthLabel"
                               TextColor="LightCoral"
                               FontSize="13"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>
        </Grid>
        <VerticalStackLayout Spacing="14"
                             HorizontalOptions="Center">

            <Button Text="⚔️ ATAK"
                    Clicked="OnAttackClicked"
                    BackgroundColor="#3949AB"
                    TextColor="White"
                    FontSize="20"
                    CornerRadius="14"
                    HeightRequest="56"
                    WidthRequest="200"/>

            <Button Text="⟲ Restart"
                    Clicked="OnRestartClicked"
                    BackgroundColor="#555"
                    TextColor="White"
                    FontSize="16"
                    CornerRadius="12"
                    HeightRequest="46"
                    WidthRequest="150"/>
        </VerticalStackLayout>
            <Border Grid.Row="2"
                    Background="#151515"
                    StrokeShape="RoundRectangle 20"
                    Padding="10"
                    MaximumHeightRequest="260">
            <Grid RowDefinitions="Auto,*">
                <Label Grid.Row="0"
               Text="📜 Przebieg walki"
               TextColor="#AAAAAA"
               FontSize="14"
               HorizontalTextAlignment="Center"
               Margin="0,0,0,6"/>
                <CollectionView Grid.Row="1"
                        x:Name="LogsView"
                        ItemsSource="{Binding Logs}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Label Text="{Binding}"
                           TextColor="White"
                           FontSize="14"
                           Margin="4,2"/>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>
        </Border>
    </VerticalStackLayout>
</ContentPage> 